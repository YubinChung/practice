<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
</head>
<body>
	
	<div class="container">
		<div class="col-lg-12">
			<h1>고스톱 점수 계산</h1>
			<p>광 갯수 입력 : <input type="number" id="kwang" min="0" max="5" /></p>
			<p>비광 여부 : <input type="checkbox" name="bekwang" id="bekwang" /><label for="bekwang"> Yes</label></p>
			<p>열끗 갯수 입력(고도리 포함 갯수) : <input type="number" id="animal" min="0" max="9" /></p>
			<p>고도리 여부 : <input type="checkbox" name="godori" id="godori" /><label for="godori"> Yes</label></p>
			<p>단 총 갯수 입력 : <input type="number" id="line" min="0" max="10" /></p>
			<p>초단/홍단/청단 여부 : <input type="checkbox" name="chodan" id="chodan" /><label for="godori"> 초단</label> <input type="checkbox" name="reddan" id="reddan" /><label for="reddan"> 홍단</label> <input type="checkbox" name="bluedan" id="bluedan" /><label for="reddan"> 청단</label></p>
			<p>피 갯수 입력 : <input type="number" id="p" min="0" max="25" /></p>
			<p>쌍피 갯수 입력 : <input type="number" id="pDouble" min="0" max="3" /></p>
			<p>다른 유저의 피박 여부 : <input type="checkbox" name="pBack" id="pBack" /><label for="bekwang"> Yes</label></p>	
			<button onclick="kwangCheck();">Calculate</button>
		</div>
	</div>

	<script>
		var total = 0, 
				count = 1;

		// 광 체크
		function kwangCheck(){
			var kwang = parseInt(document.getElementById('kwang').value);
					

			switch (kwang){
				// 3개 일 때 
				case 3: total += 3; bekwangCheck(); break;
				// 4개 일 때 
				case 4: total += 4; break;
				// 5개 일 때, 광박 2배 체크
				case 5: total += 15; count *= 2; break;
			}	
			if (kwang > 5) alert("광은 5개까지 입니다.");
			console.log("광 점수 : " + total);

			// 끗 체크하는 함수 호출
			animalCheck();
		}
		// 비광 체크
		function bekwangCheck(){
			var bekwang = document.getElementById("bekwang").checked;
			if (bekwang == true) total -= 1;

		}
		
		// 열끗 체크
		function animalCheck(){
			var animal = parseInt(document.getElementById('animal').value),
					godori = document.getElementById("godori").checked,
					animalTotal = 0;
			
			if (animal > 4){
				animalTotal += (animal-4);
				if (animal > 6) count *= 2;
			}
			if (godori == true) {
				if (animal > 2){
					animalTotal += 5;
				} else {
					alert("고도리가 아닌 것 같네요");
				}
			}
			if (animal > 9) alert("열끗은 9개까지 입니다.");
			console.log("끗 점수 : " + animalTotal);
			total += animalTotal;
			
			// 단 체크 함수 호출 
			lineCheck();
		}

		// 단 체크
		function lineCheck(){
			var line = parseInt(document.getElementById('line').value),
					chodan = document.getElementById('chodan').checked,
					reddan = document.getElementById('reddan').checked,
					bluedan = document.getElementById('bluedan').checked,
					lineTotal = 0;
			
			if (line > 4) lineTotal += (line-4);

			// 초단
			if (chodan == true ) {
				if (line > 3){
					// 총 개수 4개 이상일 때 확인
					lineTotal += 3;
				} else {
					alert("초단이 아닌 것 같네요");
				}
			}
			
			// 청단
			if (reddan == true ) {
				if (line > 2 ){
					lineTotal += 3;
				} else {
					alert("청단이 아닌 것 같네요");
				}
			}

			// 홍단
			if (bluedan == true ){
				if (line > 2 ){
					lineTotal += 3;
				} else {
					alert("청단이 아닌 것 같네요");
				}
			} 

			// 단을 모두 가지고 있는데 초단/홍단/청단 체크 안했을 경우.. 
			if (line == 10 ){
				if (chodan == false ) lineTotal += 3;
				if (reddan == false ) lineTotal += 3;
				if (bluedan == false ) lineTotal += 3;
			}

			if (line > 10) alert("단은 10개까지 입니다.");
			console.log("단 점수 : " + lineTotal);

			pCheck();
		}
		
		function pCheck() {
			// 피 체크 
			var p = parseInt(document.getElementById('p').value),
					pBack = document.getElementById('pBack').checked,
					pDouble = parseInt(document.getElementById('pDouble').value),
					pTotal = 0;

			if (p > 9) {
				pTotal += (p-9);

				// 피박
				if ( pBack == true ) count *= 2;

				// 쌍피
				if ( pDouble == true ) {
					pTotal += pDouble * 1;
				}
			}

			console.log("피 점수 : " + pTotal);
			total += pTotal;
			totalReset();

		}
		// 마지막 total reset!
		function totalReset() {
			console.log("총 점수 : " + (total*count));
			total = 0;
		}
	</script>
</body>
</html>